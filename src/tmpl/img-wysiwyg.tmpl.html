<table tabfocus="0" cellspacing="0" cellpadding="0" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: 'ui-state-highlight', hoverClass: 'ui-state-draghover' }, extdroppable: { options: { accept: '.image', activeClass: 'ui-state-highlight', hoverClass: 'ui-state-draghover' }, data: _src, dragged: $root.fileToImage, isEnabled: $root.lockDownMode() < 2 || ($root.lockDownMode() === 2 && !_src._locked()) }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { 'data-drop-content': $root.t('Drop here'), width: _width, height: _height, align: _halign }"
  class="img-wysiwyg selectable-img" style="display: table;"><tr><td class="uploadzone" data-drop-content="Drop here" data-bind="attr: { height: _height, align: _halign, valign: _align }">
  <div class="mo-imgselectionhelper">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" shape-rendering="crispEdges">
      <defs>
        <line x1="0" y1="0" x2="100%" y2="0" id="top"/>
        <line x1="100%" y1="0" x2="100%" y2="100%" id="right"/>
        <line x1="100%" y1="100%" x2="0" y2="100%" id="bottom"/>
        <line x1="0" y1="100%" x2="0" y2="0" id="left"/>
      </defs>
      <g stroke-width="2" data-bind="virtualAttr: { stroke: Color.readability( '#FFFFFF', backgroundColor._defaultComputed() ) &gt;= 5  &amp;&amp; backgroundColor._defaultComputed() != 'transparent' ? '#FFFFFF' : '#000000' }">
        <use xlink:href="#top"/>
        <use xlink:href="#right"/>
        <use xlink:href="#bottom"/>
        <use xlink:href="#left"/>
      </g>
    </svg>
  </div>
  <div class="mo-uploadzone"></div>
  <div class="img-size" data-bind="text: _size">size</div>
  <div class="midtools" data-bind="">
    <!-- ko if: $root.lockDownMode() < 2 || ($root.lockDownMode() === 2 && !_src._locked()) -->
    <!-- ko if: _src() != '' -->
    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t('Remove image') }, click: _src.bind(_src, ''), clickBubble: false, tooltip: {show: {delay: 500}, track: true}"><i class="fa fa-fw fa-trash-o"></i></div>
    <!-- ko if: typeof $root.editImage !== 'undefined' -->
    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t('Open the image editing tool') }, click: $root.editImage.bind($element, _src), clickBubble: false, tooltip: {show: {delay: 500}, track: true}"><i class="fa fa-fw fa-pencil"></i></div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: _src() == '' -->
    <div title="Upload a new image" data-bind="attr: { title: $root.t('Upload a new image') }, tooltip: {show: {delay: 500}, track: true}" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>
      <input class="fileupload nofile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">
    </div>
    <!-- /ko -->
    <!-- ko if: typeof $root.selectImage !== 'undefined' -->
    <div title="Select image from gallery" class="tool gallery" data-bind="attr: { title: $root.t('Select image from gallery') }, click: $root.selectImage.bind($element, _src), clickBubble: true, tooltip: {show: {delay: 500}, track: true}"><i class="fa fa-fw fa-picture-o"></i></div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: $root.lockDownMode() === 1 -->
    <!-- ko if: !_src._locked() -->
    <div title="Lock image" class="tool lock" data-bind="attr: { title: $root.t('Lock image') }, click: _src._locked.bind(undefined, true), clickBubble: false, tooltip: {show: {delay: 500}, track: true}"><i class="fa fa-fw fa-unlock-alt"></i></div>
    <!-- /ko -->
    <!-- ko if: _src._locked() -->
    <div title="Unlock image" class="tool unlock" data-bind="attr: { title: $root.t('Unlock image') }, click: _src._locked.bind(undefined, false), clickBubble: false, tooltip: {show: {delay: 500}, track: true}"><i class="fa fa-fw fa-lock"></i></div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: $root.lockDownMode() > 2 || ($root.lockDownMode() === 2 && _src._locked()) -->
    <div class="tool locked"><i class="fa fa-fw fa-lock"></i></div>
    <!-- /ko -->
  </div>

  <!-- ko template: _template --><!-- /ko -->

  <!-- ko if: _src() == '' -->
    <!--
    <img style="display: block;" class="imgplaceholder" width="200" src="" alt="Insert an image here" data-bind="wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />
    -->
    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t('Drop an image here')">Drop an image here</span></span>
  <!-- /ko -->
  <!-- ko if: _src() != '' -->
  <!--
    <img style="display: block;" width="200" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }" />
    -->
  <!-- /ko -->
  <!-- pulsante per la cancellazione -->
  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t('Drop an image here or click the upload button') }, tooltip: {show: {delay: 500}, track: true}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">
    <!-- ko if: _src.preloaded && _src() != _src.preloaded() -->PRELOADING....<!-- /ko -->
    <!-- ko if: _src() != '' -->
      <input class="fileupload withfile" type="file" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">
    <!-- /ko -->
    <div class="progress">
      <div>
        <div>
          <div class="progress-bar progress-bar-success"></div>
        </div>
      </div>
    </div>
  </div>
  </td>
  </tr>
</table>
